<!DOCTYPE html>
<html>
<head>
    <title>Checkout</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>

<h2>Pay â‚¹20 for Premium Plan</h2>
<button id="pay-button">Pay Now</button>

<script>
document.getElementById("pay-button").addEventListener("click", function () {

    fetch("/create-checkout-session/", {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
            name: "Premium Plan",
            amount: 10,     // in rupees
            currency: "INR",
            plan: "premium",
            interval: "month",
        })
    })
    .then(response => response.json())
    .then(data => {

        var options = {
            "key": data.key_id,
            "amount": data.amount,
            "currency": data.currency,
            "name": "Premium Plan",
            "order_id": data.order_id,
            "handler": function (response){
                window.location.href = data.success_url + "?payment_id=" + response.razorpay_payment_id;
            },
            "modal": {
                "ondismiss": function(){
                    window.location.href = data.cancel_url;
                }
            },
            "theme": {
                "color": "#3399cc"
            }
        };

        var rzp = new Razorpay(options);
        rzp.open();
    });
});
</script>

</body>
</html>
